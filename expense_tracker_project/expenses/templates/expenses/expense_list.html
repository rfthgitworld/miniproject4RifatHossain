{% extends 'expenses/base.html' %}
{% block title %}All Expenses{% endblock %}

{% block content %}
<h2>All Expenses</h2>

<table class="table table-hover">
  <thead>
    <tr>
      <th>Title</th>
      <th>Category</th>
      <th>Amount</th>
      <th>Date</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    {% for e in expenses %}
    <tr>
      <td>{{ e.title }}</td>

      <!-- FIX APPLIED -->
      <td>{{ e.category.name|default:"No Category" }}</td>

      <td>${{ e.amount }}</td>
      <td>{{ e.date }}</td>
      <td>
        <a class="btn btn-sm btn-outline-secondary" href="{% url 'expenses:expense_detail' e.pk %}">View</a>
        <a class="btn btn-sm btn-outline-primary" href="{% url 'expenses:edit_expense' e.pk %}">Edit</a>
        <a class="btn btn-sm btn-outline-danger" href="{% url 'expenses:expense_detail' e.pk %}">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5">No expenses yet</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
